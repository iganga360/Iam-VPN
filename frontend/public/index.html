<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IAM-VPN - Web VPN & Proxy Service</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-brand">
                <h1>üåê IAM-VPN</h1>
                <p class="tagline">Secure Web Proxy & Tunnel</p>
            </div>
            <div class="nav-menu" id="navMenu">
                <button class="nav-item" onclick="showSection('home')">Home</button>
                <button class="nav-item" onclick="showSection('proxy')">Proxy</button>
                <button class="nav-item" onclick="showSection('tunnel')">Tunnel</button>
                <button class="nav-item" onclick="showSection('admin')" id="adminBtn" style="display:none;">Admin</button>
                <button class="nav-item" onclick="logout()" id="logoutBtn" style="display:none;">Logout</button>
                <button class="nav-item" onclick="showSection('login')" id="loginBtn">Login</button>
            </div>
        </nav>

        <!-- Login Section -->
        <section id="loginSection" class="section active">
            <div class="card">
                <h2>Login</h2>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Login</button>
                </form>
                <p class="hint">Default credentials: admin / admin123</p>
                <div id="loginMessage" class="message"></div>
            </div>
        </section>

        <!-- Home Section -->
        <section id="homeSection" class="section">
            <div class="hero">
                <h2>Welcome to IAM-VPN</h2>
                <p>Your secure web-based VPN, proxy, and tunnel solution</p>
            </div>
            
            <div class="features">
                <div class="feature-card">
                    <div class="icon">üîí</div>
                    <h3>Secure Proxy</h3>
                    <p>Browse anonymously through our secure web proxy</p>
                </div>
                <div class="feature-card">
                    <div class="icon">üåê</div>
                    <h3>Encrypted Tunnel</h3>
                    <p>WebSocket-based encrypted tunnels for secure communication</p>
                </div>
                <div class="feature-card">
                    <div class="icon">‚ö°</div>
                    <h3>Fast & Reliable</h3>
                    <p>High-performance infrastructure for optimal speed</p>
                </div>
                <div class="feature-card">
                    <div class="icon">üìä</div>
                    <h3>Admin Dashboard</h3>
                    <p>Comprehensive monitoring and management tools</p>
                </div>
            </div>
        </section>

        <!-- Proxy Section -->
        <section id="proxySection" class="section">
            <div class="card">
                <h2>Web Proxy</h2>
                <form id="proxyForm" onsubmit="handleProxyRequest(event)">
                    <div class="form-group">
                        <label for="targetUrl">Target URL</label>
                        <input type="url" id="targetUrl" name="targetUrl" placeholder="https://example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="method">Method</label>
                        <select id="method" name="method">
                            <option value="GET">GET</option>
                            <option value="POST">POST</option>
                            <option value="PUT">PUT</option>
                            <option value="DELETE">DELETE</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Send Request</button>
                </form>
                <div id="proxyMessage" class="message"></div>
                <div id="proxyResponse" class="response-box"></div>
            </div>

            <div class="card">
                <h3>Proxy Statistics</h3>
                <div id="proxyStats">
                    <div class="stat-item">
                        <span class="stat-label">Total Requests:</span>
                        <span class="stat-value" id="totalRequests">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Active Connections:</span>
                        <span class="stat-value" id="activeConnections">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Errors:</span>
                        <span class="stat-value" id="proxyErrors">0</span>
                    </div>
                </div>
                <button onclick="loadProxyStats()" class="btn btn-secondary">Refresh Stats</button>
            </div>
        </section>

        <!-- Tunnel Section -->
        <section id="tunnelSection" class="section">
            <div class="card">
                <h2>WebSocket Tunnel</h2>
                <div class="status-indicator">
                    <span>Status: </span>
                    <span id="tunnelStatus" class="status-disconnected">Disconnected</span>
                </div>
                <div class="button-group">
                    <button onclick="connectTunnel()" class="btn btn-primary" id="connectBtn">Connect</button>
                    <button onclick="disconnectTunnel()" class="btn btn-danger" id="disconnectBtn" disabled>Disconnect</button>
                    <button onclick="sendPing()" class="btn btn-secondary" id="pingBtn" disabled>Send Ping</button>
                </div>
                <div id="tunnelMessage" class="message"></div>
                <div class="log-box">
                    <h4>Connection Log</h4>
                    <div id="tunnelLog"></div>
                </div>
            </div>
        </section>

        <!-- Admin Section -->
        <section id="adminSection" class="section">
            <div class="card">
                <h2>Admin Dashboard</h2>
                <div class="admin-tabs">
                    <button class="tab-btn active" onclick="showAdminTab('stats')">System Stats</button>
                    <button class="tab-btn" onclick="showAdminTab('config')">Configuration</button>
                </div>

                <div id="statsTab" class="tab-content active">
                    <h3>System Statistics</h3>
                    <div id="systemStats" class="stats-grid"></div>
                    <button onclick="loadSystemStats()" class="btn btn-primary">Refresh Stats</button>
                </div>

                <div id="configTab" class="tab-content">
                    <h3>Server Configuration</h3>
                    <div id="serverConfig" class="stats-grid"></div>
                    <button onclick="loadServerConfig()" class="btn btn-primary">Refresh Config</button>
                </div>
            </div>
        </section>
    </div>

    <footer>
        <p>&copy; 2024 IAM-VPN. Secure Web Proxy & Tunnel Service.</p>
    </footer>

    <script src="/js/app.js"></script>
</body>
</html>
